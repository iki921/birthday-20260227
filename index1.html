<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Birthday Surprise</title>

<style>
body {
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 40px;
}

.hidden { display: none; }

button {
  padding: 10px 20px;
  margin: 10px;
  font-size: 16px;
  cursor: pointer;
}

#timer { font-weight: bold; }

img {
  max-width: 300px;
  border-radius: 10px;
  margin: 20px 0;
}

textarea {
  background:#222;
  color:white;
  border:1px solid #555;
}

#cw-grid {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
  margin-top:20px;
}

.row { display:flex; gap:5px; }

.row input {
  width:35px;
  height:35px;
  text-align:center;
  font-size:18px;
  text-transform:uppercase;
  background:#222;
  color:white;
  border:1px solid #555;
  transition:0.3s;
}

.row input.correct { background:#2ecc71; }

.highlight-row.active input {
  background:gold;
  color:black;
  font-weight:bold;
}

.offset { margin-left:60px; }

#finalResult {
  font-size:24px;
  font-family:"Brush Script MT",cursive;
  color:gold;
  margin-top:20px;
}
</style>
</head>

<body>

<audio id="bgm" src="music.mp3" loop></audio>

<h1>üéÇ Alles Gute zum Geburtstag!</h1>

<div id="start">
  <p>Is it a bad idea to make a website for my programmer boyfriend?</p>
  <p>I don‚Äôt know. Let‚Äôs see.</p>
  <p>Hope you enjoy it :3</p>
  <button onclick="startQuiz()">Start</button>
</div>

<!-- PART 1 -->
<div id="quiz" class="hidden">
  <h2>Verifying you are Andras Mumm.<br>This may take a few seconds.</h2>
  <h3 id="timer">Time left: 10</h3>
  <div id="questionBox"></div>
  <div id="optionsBox"></div>
  <p id="feedback"></p>
</div>

<!-- ÂõæÁâáËøáÊ∏° -->
<div id="interlude" class="hidden">
  <img id="interludeImg">
  <p id="interludeText"></p>
  <button onclick="continueQuiz()">Continue</button>
</div>

<!-- PART 2 -->
<div id="crossword" class="hidden">
  <h2>Part 2 ‚Äì Memory Grid</h2>

  <div id="cw-grid">
    <div class="row">
      <input data-letter="K"><input data-letter="I"><input data-letter="N"><input data-letter="G">
      <input data-letter="P"><input data-letter="A"><input data-letter="P"><input data-letter="A">
      <input data-letter="S"><input data-letter="B"><input data-letter="R"><input data-letter="O">
      <input data-letter="S"><input data-letter="B"><input data-letter="R"><input data-letter="O">
      <input data-letter="S"><input data-letter="B"><input data-letter="R"><input data-letter="O">
    </div>

    <div class="row offset">
      <input data-letter="M"><input data-letter="M"><input data-letter="A"><input data-letter="P">
      <input data-letter="M"><input data-letter="Y"><input data-letter="S"><input data-letter="E">
      <input data-letter="L"><input data-letter="F">
    </div>

    <div class="row offset highlight-row" id="meinRow">
      <input data-letter="M"><input data-letter="E"><input data-letter="I"><input data-letter="N">
      <input data-letter="S"><input data-letter="C"><input data-letter="H"><input data-letter="A">
      <input data-letter="T"><input data-letter="Z">
    </div>
  </div>

  <p id="crossResult"></p>
</div>

<!-- PART 3 -->
<div id="decrypt" class="hidden">
  <h2>Part 3 : time to read the love message from girlfriend!</h2>

  <div style="font-family:monospace; margin:20px 0;">
hchvsacghvoarbcasvofkcficwbgsxlggaofhdsfgcbwbybckwbhvskcfr<br><br>
wzcjsmci3hvcigobrvhamesg<br><br>
hvobymcitcfozzhvsxcmandzcjsmcipfwbme<br><br>
wvcdsmcisbxcmcispwrhromobrjsfmrombq<br><br>
aommcmsofaovsvopsogoaojwbuogmciofs<br><br>
rcahkcffmopcihmciofous<br><br>
ozqcvczobrgsxkwzzaoyswhozzpshhsf
  </div>

  <textarea id="finalInput" rows="10" cols="70"></textarea><br><br>
  <button onclick="checkFinal()">Submit</button>
  <button onclick="showHint()">One dinner date for hint</button>

  <div id="hintBox" class="hidden" style="margin-top:20px; font-size:14px;">
  Not from the stars do I my judgment pluck...<br>
  (Shakespeare Sonnet 14 full text here)
  </div>

  <p id="finalResult"></p>
</div>

<script>

const quizData=[
{q:"1. What is the right combination of Ondi‚Äôs friend group?",
options:["banana, yuda, Indian","Hungarian, communist, Russian","Apple, yellow, Jesus"],correct:2},
{q:"2. What is the most likely food that Ondi gonna order in izakaya?",
options:["shrimp sashimi","pork with kimchi","wasabi octopus"],correct:1}
];

let current=0,score=0,timeLeft=10,timer;

function startQuiz(){
document.getElementById("bgm").play();
document.getElementById("start").classList.add("hidden");
document.getElementById("quiz").classList.remove("hidden");
loadQuestion();
}

function loadQuestion(){
if(current>=quizData.length){
document.getElementById("quiz").classList.add("hidden");
document.getElementById("crossword").classList.remove("hidden");
return;
}
timeLeft=10;
document.getElementById("timer").innerText="Time left: "+timeLeft;
const q=quizData[current];
document.getElementById("questionBox").innerText=q.q;
const box=document.getElementById("optionsBox");
box.innerHTML="";
q.options.forEach((opt,i)=>{
const btn=document.createElement("button");
btn.innerText=opt;
btn.onclick=()=>answer(i);
box.appendChild(btn);
});
clearInterval(timer);
timer=setInterval(()=>{
timeLeft--;
document.getElementById("timer").innerText="Time left: "+timeLeft;
if(timeLeft<=0){clearInterval(timer);showFeedback(false);}
},1000);
}

function answer(choice){
clearInterval(timer);
const correct=quizData[current].correct===choice;
showFeedback(correct);
}

function showFeedback(isCorrect){
document.getElementById("feedback").innerText=isCorrect?"excellent!":"ÊÆãÂøµ„Åß„Åô";
setTimeout(()=>{
if(current===0)showInterlude("image1.jpg","I AM WATCHING AT YOU üëÄ");
else if(current===1)showInterlude("image2.jpg","WE CAN DO IT!");
},800);
}

function showInterlude(img,text){
document.getElementById("quiz").classList.add("hidden");
document.getElementById("interlude").classList.remove("hidden");
document.getElementById("interludeImg").src=img;
document.getElementById("interludeText").innerText=text;
}

function continueQuiz(){
document.getElementById("interlude").classList.add("hidden");
current++;
loadQuestion();
}

// Crossword
document.addEventListener("input",function(e){
if(e.target.matches("#cw-grid input")){
e.target.value=e.target.value.toUpperCase();
checkCross();
}
});

function checkCross(){
let all=true;
document.querySelectorAll("#cw-grid input").forEach(cell=>{
if(cell.value===cell.dataset.letter){
cell.classList.add("correct");
}else{cell.classList.remove("correct");all=false;}
});
if(all){
document.getElementById("meinRow").classList.add("active");
setTimeout(()=>{
document.getElementById("crossword").classList.add("hidden");
document.getElementById("decrypt").classList.remove("hidden");
},1500);
}
}

// Part3
function normalize(t){return t.toLowerCase().replace(/\s+/g,"").replace(/[^\w]/g,"");}

function showHint(){document.getElementById("hintBox").classList.remove("hidden");}

function checkFinal(){
const user=normalize(document.getElementById("finalInput").value);
const correct=normalize(`To the most handsome hardworking sexy smart person I know in the world
I love you 3 thousand times
thank you for all the joy and love you bring me
I hope you enjoy your birthday and everyday
May your year ahead be as amazing as you are
Dont worry about your age
alcohol and sex will make it all better`);
if(user===correct){
document.getElementById("finalResult").innerText="Well done! Now go to enj";
}else{
document.getElementById("finalResult").innerText="ÊÆãÂøµ„Åß„Åô. Try again.";
}
}

</script>
</body>
</html>
